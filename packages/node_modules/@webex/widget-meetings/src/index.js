import React from 'react';
import PropTypes from 'prop-types';
import {compose} from 'recompose';
import {constructWebexEnhancer, withIntl} from '@webex/webex-widget-base';

import {WebexMeeting, WebexDataProvider} from '@webex/components';
import WebexSDKAdapter from '@webex/sdk-component-adapter';

import reducers from './reducer';
import messages from './translations/en';

function MeetingsWidget(props) {
  console.log(this.getState());
  const webex = this.getState();

  // Should break here
  const adapter = new WebexSDKAdapter(webex);

  return (
    <WebexDataProvider adapter={adapter}>
      <WebexMeeting meetingDestination={this.props.destinationId} />
    </WebexDataProvider>
  );
}

MeetingsWidget.protoTypes = {
  destinationId: PropTypes.string.isRequired
};

export default compose(
  constructWebexEnhancer({
    name: 'meetings',
    reducers
  }),
  withIntl({locale: 'en', messages})
)(MeetingsWidget);
